{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FCMS - Contractor Portal</title>
    <link rel="stylesheet" href="{% static 'css/contractor_dashboard.css' %}">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
        
        /* Chart Row */
        .chart-row,
        .activity-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
    
        .card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
    
        .card-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            background-color: rgba(0, 0, 0, 0.02);
        }
    
        .card-title {
            font-size: 1.2rem;
            margin: 0;
            color: var(--dark);
        }
    
        .card-body {
            padding: 20px;
        }
    
        .chart-container {
            height: 250px;
            position: relative;
        }
    
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
    
            .sidebar.active {
                transform: translateX(0);
            }
    
            .main-content,
            footer {
                margin-left: 0;
                width: 100%;
            }
    
            .mobile-toggle {
                display: block;
                cursor: pointer;
            }
    
            .chart-row,
            .activity-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <h2>FCMS</h2>
        </div>
        <nav class="sidebar-nav">
          <ul>
            <li class="active">
              <a href="#"><i class="fas fa-home"></i> Dashboard</a>
            </li>
            <li>
              <a href="/my/projects/"><i class="fas fa-tasks"></i> My Projects</a>
            </li>
            <li>
              <a href="#"><i class="fas fa-chart-line"></i>AI insights</a>
            </li>
            <li>
              <a href="/get/user/payments/"
                ><i class="fas fa-file-invoice-dollar"></i> Invoices</a
              >
            </li>
            <li>
              <a href="#"><i class="fas fa-comment-dots"></i> Messages</a>
            </li>
            <li>
              <a href="#"><i class="fas fa-file-alt"></i> Reports</a>
            </li>
            <li>
              <a href="#"><i class="fas fa-cog"></i> Settings</a>
            </li>
            <li class="logout">
              <a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </li>
          </ul>
        </nav>
      </aside>

      <!-- Main Content Area -->
      <main class="main-content">
        <!-- Top Navigation Bar -->
        <header class="top-nav">
          <button class="menu-toggle">
            <i class="fas fa-bars"></i>
          </button>
          <h1>FCMS</h1>
          <div class="user-actions">
            <div class="notifications">
              <i class="fas fa-bell"></i>
              <span class="badge">3</span>
            </div>
            <div class="user-profile">
              <span>Contractor</span>
              <div class="avatar">C</div>
            </div>
          </div>
        </header>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
          <div class="welcome-section">
            <h2>Welcome, Contractor!</h2>
            <p>Manage your projects and track your work efficiently.</p>
          </div>

          <!-- Stats Cards -->
          <div class="stats-container">
            <div class="stat-card">
              <div class="stat-icon project-icon">
                <i class="fas fa-briefcase"></i>
              </div>
              <div class="stat-details">
                <h3>5</h3>
                <p>Assigned Projects</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon task-icon">
                <i class="fas fa-clipboard-list"></i>
              </div>
              <div class="stat-details">
                <h3>14</h3>
                <p>Tasks In Progress</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon completed-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <div class="stat-details">
                <h3>8</h3>
                <p>Completed Tasks</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon invoice-icon">
                <i class="fas fa-file-invoice"></i>
              </div>
              <div class="stat-details">
                <h3>3</h3>
                <p>Pending Payments</p>
              </div>
            </div>
          </div>

          <!-- Quick Access Sections -->
          <div class="quick-access-container">
            <div class="quick-access-card">
              <div class="card-header">
                <h3>Work Management</h3>
                <i class="fas fa-tasks"></i>
              </div>
              <div class="card-content">
                <div class="quick-link">
                  <i class="fas fa-check-circle success-icon"></i>
                  <span>Time Tracking & Reports</span>
                </div>
                <div class="quick-link">
                  <i class="fas fa-check-circle success-icon"></i>
                  <span>Task Management</span>
                </div>
                <div class="quick-link">
                  <i class="fas fa-check-circle success-icon"></i>
                  <span>Project Milestones</span>
                </div>
              </div>
            </div>
            <div class="quick-access-card">
              <div class="card-header">
                <h3>Financial</h3>
                <i class="fas fa-dollar-sign"></i>
              </div>
              <div class="card-content">
                <div class="quick-link">
                  <i class="fas fa-check-circle success-icon"></i>
                  <span>Invoice Creation</span>
                </div>
                <div class="quick-link">
                  <i class="fas fa-check-circle success-icon"></i>
                  <span>Payment Status</span>
                </div>
                <div class="quick-link">
                  <i class="fas fa-check-circle success-icon"></i>
                  <span>Expense Tracking</span>
                </div>
              </div>
            </div>
            <div class="quick-access-card">
              <div class="card-header">
                <h3>Communication</h3>
                <i class="fas fa-comments"></i>
              </div>
              <div class="card-content">
                <div class="quick-link">
                  <i class="fas fa-check-circle success-icon"></i>
                  <span>Client Messages</span>
                </div>
                <div class="quick-link">
                  <i class="fas fa-check-circle success-icon"></i>
                  <span>File Sharing</span>
                </div>
                <div class="quick-link">
                  <i class="fas fa-check-circle success-icon"></i>
                  <span>Updates & Notifications</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Charts and Data Section -->
          <div class="chart-row">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Project Progress</h5>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="projectProgressChart"></canvas>
                    </div>
                </div>
            </div>
            {{ status_data|json_script:"status-data" }}
            {{ priority_data|json_script:"priority-data" }}
            
            {% load static %}
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script src="{% static 'javascript/contractor_dashboard.js' %}"></script>
    
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Payment Status</h5>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="paymentHistoryChart"></canvas>
                    </div>
                </div>
            </div>
            {{ payment_data|json_script:"payment-data" }}
            
            {% load static %}
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script src="{% static 'javascript/client_dashboard.js' %}"></script>
            
          </div>

          <!-- Bottom Sections -->
          <div class="bottom-container">
            <div class="recent-activity">
              <h3>Recent Activities</h3>
              <div class="activity-list">
                <div class="activity-item">
                  <div class="activity-icon"><i class="fas fa-check"></i></div>
                  <div class="activity-info">
                    <p>Task "Design Homepage" marked as complete</p>
                    <span class="timestamp">Today, 9:30 AM</span>
                  </div>
                </div>
                <div class="activity-item">
                  <div class="activity-icon">
                    <i class="fas fa-comment"></i>
                  </div>
                  <div class="activity-info">
                    <p>New message from Client regarding Project B</p>
                    <span class="timestamp">Yesterday, 4:45 PM</span>
                  </div>
                </div>
                <div class="activity-item">
                  <div class="activity-icon">
                    <i class="fas fa-file-invoice-dollar"></i>
                  </div>
                  <div class="activity-info">
                    <p>Invoice #1082 has been paid</p>
                    <span class="timestamp">Apr 15, 2025</span>
                  </div>
                </div>
                <div class="activity-item">
                  <div class="activity-icon"><i class="fas fa-tasks"></i></div>
                  <div class="activity-info">
                    <p>New task assigned: "Update Contact Form"</p>
                    <span class="timestamp">Apr 14, 2025</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="upcoming-deadlines">
              <h3>Upcoming Deadlines</h3>
              <div class="deadline-list">
                <div class="deadline-item urgent">
                  <div class="deadline-date">
                    <span class="day">18</span>
                    <span class="month">Apr</span>
                  </div>
                  <div class="deadline-info">
                    <h4>Submit Project A Final Designs</h4>
                    <p>2 days remaining</p>
                  </div>
                </div>
                <div class="deadline-item">
                  <div class="deadline-date">
                    <span class="day">22</span>
                    <span class="month">Apr</span>
                  </div>
                  <div class="deadline-info">
                    <h4>Project B Backend Development</h4>
                    <p>6 days remaining</p>
                  </div>
                </div>
                <div class="deadline-item">
                  <div class="deadline-date">
                    <span class="day">30</span>
                    <span class="month">Apr</span>
                  </div>
                  <div class="deadline-info">
                    <h4>Monthly Progress Report</h4>
                    <p>14 days remaining</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="{% static 'javascript/contractor_dashboard.js' %}"></script>
  </body>
</html>
